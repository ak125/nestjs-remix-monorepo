/* === SELF-HOSTED FONTS (ex-Google Fonts) === */
/* LCP Phase 2: Fonts servies localement, Ã©limine 2 DNS lookups cross-origin */
/* Inter = variable font (400-600 dans un seul fichier) */
/* Montserrat = variable font (600-700 dans un seul fichier) */

/* --- Inter (body/sans) --- */
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 400 600;
  font-display: swap;
  src: url('/fonts/inter-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 400 600;
  font-display: swap;
  src: url('/fonts/inter-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

/* --- Montserrat (headings) --- */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 600 700;
  font-display: swap;
  src: url('/fonts/montserrat-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 600 700;
  font-display: swap;
  src: url('/fonts/montserrat-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

/* --- Roboto Mono (data/code) --- */
@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/fonts/roboto-mono-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/fonts/roboto-mono-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

/* === DESIGN SYSTEM === */
/* tokens.css + utilities.css chargÃ©s via links() dans root.tsx */
/* (les @import CSS ne sont pas rÃ©solus par Vite en dev mode) */

/* === MAILLAGE INTERNE === */
/* (intÃ©grÃ© directement pour Ã©viter erreur @layer sans @tailwind directives) */

/* === COULEURS DE MARQUES === */
/* brand-colors.css: variables CSS chargÃ©es via links() dans root.tsx */
/* brand utilities intÃ©grÃ©es ci-dessous dans @layer utilities */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* === BASE STYLES === */
@layer base {
  /* ðŸš€ LCP Optimization: scroll-margin pour Ã©viter getBoundingClientRect */
  [id] {
    scroll-margin-top: 120px;
  }

  :root {
    /* Optical sizing automatique */
    font-optical-sizing: auto;
    
    /* Kerning optimisÃ© */
    font-kerning: normal;
    
    /* Ligatures contextuelles */
    font-variant-ligatures: contextual common-ligatures;
    
    /* Rendering optimal */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  * {
    @apply border-border;
  }
  
  html, body {
    max-width: 100vw;
    overflow-x: hidden;
  }

  body {
    @apply bg-background text-foreground;
    font-family: var(--font-body);
    font-size: var(--font-size-base);
    line-height: var(--line-height-relaxed); /* 1.6 */
    /* Ã‰vite CLS lors de l'ouverture de modals (scrollbar disparaÃ®t) */
    scrollbar-gutter: stable;
  }

  /* Mobile: images contenues + inputs sans zoom iOS */
  img {
    max-width: 100%;
    height: auto;
  }

  @media screen and (max-width: 767px) {
    input, select, textarea {
      font-size: 16px !important;
    }
  }

  /* Headings avec Ã©chelles fluides */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-heading);
    line-height: var(--line-height-tight); /* 1.2 */
    letter-spacing: var(--letter-spacing-tight); /* -0.025em */
    font-weight: 600;
  }

  h1 { font-size: var(--font-size-fluid-5xl); }
  h2 { font-size: var(--font-size-fluid-4xl); }
  h3 { font-size: var(--font-size-fluid-3xl); }
  h4 { font-size: var(--font-size-fluid-2xl); }
  h5 { font-size: var(--font-size-fluid-xl); }
  h6 { font-size: var(--font-size-fluid-lg); }

  /* Code et donnÃ©es */
  code, kbd, samp, pre {
    font-family: var(--font-data);
    font-variant-numeric: tabular-nums slashed-zero;
  }

  /* Prose optimisÃ© */
  .prose {
    max-width: var(--max-width-prose); /* 70ch */
    line-height: var(--line-height-relaxed);
  }

  .prose-wide {
    max-width: var(--max-width-proseWide); /* 75ch */
  }

  .prose-narrow {
    max-width: var(--max-width-proseNarrow); /* 60ch */
  }
}

/* === MAILLAGE INTERNE â€” Styles des liens === */
@layer components {
  /* Liens internes gÃ©nÃ©riques */
  a {
    @apply transition-colors duration-200;
  }

  /* Liens dans le contenu (articles, descriptions, SEO) */
  .prose a,
  article a,
  .content a,
  .seo-content a {
    @apply text-primary underline decoration-primary/30 underline-offset-2;
    @apply hover:text-primary-600 hover:decoration-primary;
    @apply font-medium;
  }

  /* Liens de navigation (header, footer, menus) */
  nav a:not(.button):not(.btn):not(.no-style),
  .nav-link,
  header a:not(.button):not(.btn):not(.no-style) {
    @apply text-secondary-600 no-underline;
    @apply hover:text-primary hover:underline;
    @apply font-medium;
  }

  /* Liens dans breadcrumb (fil d'Ariane) */
  .breadcrumb a,
  nav[aria-label="breadcrumb"] a,
  [itemtype="https://schema.org/BreadcrumbList"] a {
    @apply text-secondary-500 no-underline;
    @apply hover:text-primary hover:underline;
  }

  /* Liens SEO (footer, sitemap, pages lÃ©gales) */
  footer a:not(.button):not(.btn):not(.no-style),
  .footer-link,
  .sitemap-link,
  .legal-link {
    @apply text-gray-400 no-underline;
    @apply hover:text-white hover:underline;
  }

  /* Liens catalogue (catÃ©gories, gammes, produits) */
  .catalog-link,
  .product-link,
  .category-link,
  .gamme-link {
    @apply text-gray-900 font-medium no-underline;
    @apply hover:text-primary hover:underline;
    @apply transition-all duration-200;
  }

  /* Liens constructeurs/marques/vÃ©hicules */
  .brand-link,
  .model-link,
  .vehicle-link,
  .manufacturer-link {
    @apply text-secondary-600 font-semibold no-underline;
    @apply hover:text-primary hover:underline hover:scale-105;
    @apply transition-all duration-200;
  }

  /* Liens blog (articles, conseils, guides) */
  .blog-link,
  .article-link,
  .guide-link {
    @apply text-gray-700 no-underline;
    @apply hover:text-primary hover:underline;
    @apply font-medium;
  }

  /* Liens CTA (Call-to-Action) */
  .cta-link {
    @apply text-primary font-bold no-underline;
    @apply hover:text-primary-600 hover:underline;
  }

  /* Liens internes SEO (maillage interne) - WCAG AA contrast ratio 4.5:1 */
  .seo-internal-link {
    @apply text-blue-700 underline decoration-blue-400/50 underline-offset-2;
    @apply hover:text-blue-800 hover:decoration-blue-600;
    @apply font-medium;
  }

  /* Liens externes (icÃ´ne â†—) */
  a[target="_blank"]:not(.no-icon)::after {
    content: " â†—";
    @apply text-xs text-gray-400 ml-1;
  }

  /* Liens actifs (page courante) */
  a.active,
  a[aria-current="page"] {
    @apply text-primary font-semibold;
    @apply border-b-2 border-primary;
  }

  /* Liens disabled */
  a.disabled,
  a[aria-disabled="true"] {
    @apply text-gray-400 pointer-events-none cursor-not-allowed opacity-50;
  }

  /* Liens avec badge (ex: "Nouveau", "Promo") */
  .badge-link {
    @apply relative;
  }

  .badge-link::before {
    content: attr(data-badge);
    @apply absolute -top-2 -right-2;
    @apply bg-primary text-white text-xs font-bold;
    @apply px-1.5 py-0.5 rounded-full;
    @apply shadow-sm;
  }

  /* Liens images (cards) */
  a:has(img) {
    @apply block overflow-hidden;
  }

  a:has(img):hover img {
    @apply scale-105;
    @apply transition-transform duration-300;
  }

  /* ThÃ¨me sombre (dark mode) */
  .dark a:not(.button):not(.btn) {
    @apply text-primary-400;
  }

  .dark a:not(.button):not(.btn):hover {
    @apply text-primary-300;
  }

  /* ThÃ¨me haute lisibilitÃ© */
  .high-contrast a {
    @apply underline decoration-2;
  }
}

/* Animations: dÃ©finies dans animations.css, seules les classes utilitaires ici */
@layer utilities {
  .animate-shimmer {
    animation: shimmer 2s infinite;
  }

  .animate-fadeIn {
    animation: fadeIn 0.2s ease-out;
  }

  .animate-slideInRight {
    animation: slideInRight 0.3s ease-out;
  }

  /* Scrollbar personnalisÃ©e */
  .scrollbar-thin::-webkit-scrollbar {
    height: 6px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded-full;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400;
  }

  /* === MOBILE-FIRST RESPONSIVE UTILITIES === */

  /* Safe area (iPhone notch/Dynamic Island) */
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }
  .pt-safe {
    padding-top: env(safe-area-inset-top, 0);
  }
  .pl-safe {
    padding-left: env(safe-area-inset-left, 0);
  }
  .pr-safe {
    padding-right: env(safe-area-inset-right, 0);
  }
  .p-safe {
    padding: env(safe-area-inset-top, 0) env(safe-area-inset-right, 0) env(safe-area-inset-bottom, 0) env(safe-area-inset-left, 0);
  }

  /* Touch targets - WCAG AA minimum 44px, Google recommends 48px for e-commerce */
  .touch-target {
    @apply min-h-[44px] min-w-[44px];
  }
  .touch-target-lg {
    @apply min-h-[48px] min-w-[48px];
  }

  /* Mobile-only / Desktop-only shortcuts */
  .mobile-only {
    @apply md:hidden;
  }
  .desktop-only {
    @apply hidden md:block;
  }
  .tablet-up {
    @apply hidden sm:block;
  }
  .desktop-up {
    @apply hidden lg:block;
  }

  /* Responsive text that doesn't break layout */
  .text-balance {
    text-wrap: balance;
  }
  .text-pretty {
    text-wrap: pretty;
  }

  /* Hide scrollbar but allow scrolling (for horizontal scroll containers) */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Touch manipulation - disable double-tap zoom for faster click response */
  .touch-manipulation {
    touch-action: manipulation;
  }

  /* Prevent iOS zoom on input focus (requires font-size >= 16px) */
  .no-zoom-input {
    @apply text-base;
    font-size: max(16px, 1rem);
  }

  /* Snap scrolling for carousels */
  .snap-x-mandatory {
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
  }
  .snap-start {
    scroll-snap-align: start;
  }
  .snap-center {
    scroll-snap-align: center;
  }

  /* === TOKENIZED SEMANTIC SPACING === */
  /* CohÃ©rence immÃ©diate avec tokens fluides - utilisez ces classes au lieu de px-3 md:px-6 */

  /* Page horizontal padding (responsive: 12px â†’ 24px â†’ 32px) */
  .px-page {
    padding-left: clamp(0.75rem, 3vw, 2rem);
    padding-right: clamp(0.75rem, 3vw, 2rem);
  }

  /* Section vertical padding (responsive: 32px â†’ 48px â†’ 64px) */
  .py-section {
    padding-top: clamp(2rem, 5vw, 4rem);
    padding-bottom: clamp(2rem, 5vw, 4rem);
  }
  .py-section-sm {
    padding-top: clamp(1.5rem, 4vw, 2.5rem);
    padding-bottom: clamp(1.5rem, 4vw, 2.5rem);
  }
  .py-section-lg {
    padding-top: clamp(3rem, 7vw, 5rem);
    padding-bottom: clamp(3rem, 7vw, 5rem);
  }

  /* Gap between sections (responsive) */
  .gap-section {
    gap: clamp(1.5rem, 4vw, 2.5rem);
  }
  .gap-section-sm {
    gap: clamp(1rem, 2vw, 1.5rem);
  }
  .gap-section-lg {
    gap: clamp(2rem, 5vw, 3rem);
  }

  /* Content block gap (for card grids, lists) */
  .gap-content {
    gap: clamp(0.75rem, 2vw, 1.25rem);
  }

  /* Margin variants */
  .mt-section {
    margin-top: clamp(2rem, 5vw, 4rem);
  }
  .mb-section {
    margin-bottom: clamp(2rem, 5vw, 4rem);
  }
  .my-section {
    margin-top: clamp(2rem, 5vw, 4rem);
    margin-bottom: clamp(2rem, 5vw, 4rem);
  }

  /* === LIENS â€” Ã‰tats spÃ©ciaux === */
  /* Animation focus pour accessibilitÃ© */
  a:focus-visible {
    @apply outline-2 outline-offset-2 outline-primary;
    @apply ring-2 ring-primary ring-offset-2;
  }

  /* Liens visitÃ©s (SEO) */
  a:visited:not(.no-visited) {
    @apply text-purple-600;
  }

  .dark a:visited:not(.no-visited) {
    @apply text-purple-400;
  }

  /* === BRAND COLORS â€” Utilities === */
  .text-brand {
    color: var(--brand-primary);
  }
  .text-brand-light {
    color: var(--brand-primary-light);
  }
  .text-brand-dark {
    color: var(--brand-primary-dark);
  }
  .bg-brand {
    background-color: var(--brand-primary);
  }
  .bg-brand-light {
    background-color: var(--brand-primary-light);
  }
  .bg-brand-dark {
    background-color: var(--brand-primary-dark);
  }
  .border-brand {
    border-color: var(--brand-primary);
  }
  .border-brand-light {
    border-color: var(--brand-primary-light);
  }
  .ring-brand {
    --tw-ring-color: var(--brand-primary);
  }
  .hover\:bg-brand:hover {
    background-color: var(--brand-primary);
  }
  .hover\:bg-brand-dark:hover {
    background-color: var(--brand-primary-dark);
  }
  .hover\:text-brand:hover {
    color: var(--brand-primary);
  }
}