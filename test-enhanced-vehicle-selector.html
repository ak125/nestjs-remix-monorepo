<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Enhanced Vehicle Selector - Am√©lioration PHP vers TypeScript</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Import des styles pour le composant avanc√© */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        /* Simulation des styles du composant */
        .advanced-vehicle-selector {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
        }

        .selector-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: linear-gradient(to right, #2563eb, #1d4ed8);
            color: white;
        }

        .selector-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.125rem;
            font-weight: 600;
            margin: 0;
        }

        .mode-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.375rem 0.75rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 0.375rem;
            transition: background-color 0.2s;
            font-size: 0.875rem;
            font-weight: 500;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
        }

        .mode-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .mode-toggle.active {
            background: white;
            color: #2563eb;
        }

        .cascade-selector {
            padding: 1.5rem;
            gap: 1.5rem;
            display: flex;
            flex-direction: column;
        }

        .selector-step {
            gap: 0.75rem;
            display: flex;
            flex-direction: column;
        }

        .step-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            color: #374151;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        .selector-select {
            width: 100%;
            padding: 0.75rem 2.5rem 0.75rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: all 0.2s;
            appearance: none;
            background: white;
        }

        .selector-select:focus {
            outline: none;
            ring: 2px solid #3b82f6;
            border-color: #3b82f6;
        }

        .types-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }

        .type-card {
            padding: 1rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }

        .type-card:hover {
            border-color: #93c5fd;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transform: scale(1.02);
        }

        .type-card.selected {
            border-color: #3b82f6;
            background: #eff6ff;
            ring: 2px solid #93c5fd;
        }

        .type-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }

        .type-name {
            font-weight: 600;
            color: #111827;
            font-size: 0.875rem;
        }

        .type-power {
            padding: 0.25rem 0.5rem;
            background: #dcfce7;
            color: #166534;
            font-size: 0.75rem;
            border-radius: 0.25rem;
            font-weight: 500;
        }

        .type-details {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .type-fuel {
            padding: 0.25rem 0.5rem;
            background: #fed7aa;
            color: #c2410c;
            font-size: 0.75rem;
            border-radius: 0.25rem;
        }

        .type-engine {
            padding: 0.25rem 0.5rem;
            background: #f3f4f6;
            color: #374151;
            font-size: 0.75rem;
            border-radius: 0.25rem;
            font-family: 'Courier New', monospace;
        }

        .type-mine {
            font-size: 0.75rem;
            color: #6b7280;
            font-family: 'Courier New', monospace;
        }

        .type-period {
            font-size: 0.75rem;
            color: #6b7280;
            margin-bottom: 0.5rem;
        }

        .parts-count {
            font-size: 0.75rem;
            color: #2563eb;
            font-weight: 500;
        }

        .demo-section {
            margin: 2rem 0;
            padding: 2rem;
            background: #f8fafc;
            border-radius: 0.5rem;
        }

        .demo-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 1rem;
        }

        .demo-description {
            color: #6b7280;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">
                üöó Enhanced Vehicle Selector Demo
            </h1>
            <p class="text-lg text-gray-600 mb-2">
                Testez les am√©liorations migr√©es des fichiers PHP vers TypeScript
            </p>
            <p class="text-sm text-gray-500">
                Version 2.0 - Cascade Marque‚ÜíAnn√©e‚ÜíMod√®le‚ÜíType + Recherche Type Mine
            </p>
        </header>

        <div class="demo-section">
            <h2 class="demo-title">üéØ Fonctionnalit√©s Int√©gr√©es</h2>
            <div class="demo-description">
                <ul class="list-disc list-inside space-y-2">
                    <li><strong>Cascade Intelligente :</strong> S√©lection Marque ‚Üí Ann√©e ‚Üí Mod√®le ‚Üí Type avec mise √† jour automatique</li>
                    <li><strong>Recherche Type Mine :</strong> Recherche directe par code type mine (ex: A3B4C5)</li>
                    <li><strong>SEO Variables :</strong> G√©n√©ration dynamique des variables #PrixPasCher#, #CompSwitch#, etc.</li>
                    <li><strong>Optimisation Images :</strong> Support WebP avec fallback automatique</li>
                    <li><strong>Gestion Cache :</strong> Cache intelligent avec TTL et invalidation automatique</li>
                    <li><strong>API Enrichie :</strong> Service API unifi√© avec gestion d'erreurs avanc√©e</li>
                </ul>
            </div>
        </div>

        <!-- Simulation du composant Enhanced Vehicle Selector -->
        <div class="max-w-4xl mx-auto">
            <div class="advanced-vehicle-selector">
                <div class="selector-header">
                    <h3 class="selector-title">
                        üöó S√©lectionnez votre v√©hicule
                    </h3>
                    <button class="mode-toggle" id="modeToggle">
                        üìÑ Type Mine
                    </button>
                </div>

                <div class="cascade-selector" id="cascadeMode">
                    <!-- S√©lection Marque -->
                    <div class="selector-step">
                        <label class="step-label">
                            üè≠ Marque
                        </label>
                        <select class="selector-select" id="brandSelect">
                            <option value="">Choisir une marque</option>
                            <option value="13">Alfa Romeo (15 mod√®les)</option>
                            <option value="14">Audi (42 mod√®les)</option>
                            <option value="15">BMW (38 mod√®les)</option>
                            <option value="16">Mercedes-Benz (45 mod√®les)</option>
                            <option value="17">Peugeot (28 mod√®les)</option>
                            <option value="18">Renault (32 mod√®les)</option>
                            <option value="19">Volkswagen (25 mod√®les)</option>
                        </select>
                    </div>

                    <!-- S√©lection Ann√©e (affich√© apr√®s s√©lection marque) -->
                    <div class="selector-step" id="yearStep" style="display: none;">
                        <label class="step-label">
                            üìÖ Ann√©e
                        </label>
                        <select class="selector-select" id="yearSelect">
                            <option value="">Choisir une ann√©e</option>
                            <option value="2023">2023 (12 mod√®les)</option>
                            <option value="2022">2022 (15 mod√®les)</option>
                            <option value="2021">2021 (18 mod√®les)</option>
                            <option value="2020">2020 (20 mod√®les)</option>
                            <option value="2019">2019 (22 mod√®les)</option>
                        </select>
                    </div>

                    <!-- S√©lection Mod√®le (affich√© apr√®s s√©lection ann√©e) -->
                    <div class="selector-step" id="modelStep" style="display: none;">
                        <label class="step-label">
                            üöó Mod√®le
                        </label>
                        <select class="selector-select" id="modelSelect">
                            <option value="">Choisir un mod√®le</option>
                            <option value="1001">Giulia (8 types)</option>
                            <option value="1002">Stelvio (6 types)</option>
                            <option value="1003">Giulietta (12 types)</option>
                            <option value="1004">Mito (10 types)</option>
                        </select>
                    </div>

                    <!-- Grille des Types (affich√© apr√®s s√©lection mod√®le) -->
                    <div class="selector-step" id="typeStep" style="display: none;">
                        <label class="step-label">
                            ‚öôÔ∏è Type / Motorisation
                        </label>
                        <div class="types-grid">
                            <div class="type-card" data-type="2001">
                                <div class="type-header">
                                    <span class="type-name">2.0 JTDM 150</span>
                                    <span class="type-power">150 ch</span>
                                </div>
                                <div class="type-details">
                                    <span class="type-fuel">Diesel</span>
                                    <span class="type-engine">F1AE0481C</span>
                                    <span class="type-mine">Type mine: A3B4C5</span>
                                </div>
                                <div class="type-period">de 01/2020 √† 12/2023</div>
                                <div class="parts-count">1,247 pi√®ces disponibles</div>
                            </div>

                            <div class="type-card" data-type="2002">
                                <div class="type-header">
                                    <span class="type-name">2.2 JTDM 180</span>
                                    <span class="type-power">180 ch</span>
                                </div>
                                <div class="type-details">
                                    <span class="type-fuel">Diesel</span>
                                    <span class="type-engine">F1AE0481D</span>
                                    <span class="type-mine">Type mine: A3B4C6</span>
                                </div>
                                <div class="type-period">de 03/2020 √† 12/2023</div>
                                <div class="parts-count">1,156 pi√®ces disponibles</div>
                            </div>

                            <div class="type-card" data-type="2003">
                                <div class="type-header">
                                    <span class="type-name">2.0 T 280 Veloce</span>
                                    <span class="type-power">280 ch</span>
                                </div>
                                <div class="type-details">
                                    <span class="type-fuel">Essence</span>
                                    <span class="type-engine">F4CE0481A</span>
                                    <span class="type-mine">Type mine: A3B4C7</span>
                                </div>
                                <div class="type-period">de 06/2020 √† 12/2023</div>
                                <div class="parts-count">1,389 pi√®ces disponibles</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mode Recherche Type Mine (cach√© par d√©faut) -->
                <div class="p-6" id="typeMineMode" style="display: none;">
                    <div class="mb-4">
                        <div class="relative">
                            <input
                                type="text"
                                placeholder="Saisir le type mine de votre v√©hicule (ex: A3B4C5)"
                                class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 text-base"
                                id="typeMineInput"
                            />
                            <div class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                                üîç
                            </div>
                        </div>
                        <div class="mt-2 text-sm text-gray-600 italic">
                            Le type mine se trouve sur votre carte grise dans la case D.2
                        </div>
                    </div>

                    <!-- R√©sultats de recherche type mine -->
                    <div class="border border-gray-200 rounded-lg bg-white shadow-lg" id="typeMineResults" style="display: none;">
                        <div class="p-4 border-b border-gray-100 hover:bg-blue-50 cursor-pointer transition-colors duration-150">
                            <div class="flex items-center gap-3 mb-2">
                                <span class="inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs font-mono font-bold rounded">A3B4C5</span>
                                <span class="font-semibold text-gray-900">Alfa Romeo Giulia</span>
                            </div>
                            <div class="flex flex-wrap gap-2 text-sm text-gray-600">
                                <span class="text-sm">2.0 JTDM 150</span>
                                <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded font-medium">150 ch</span>
                                <span class="px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded font-medium">Diesel</span>
                                <span class="px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded font-medium">2020-2023</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="demo-section mt-8">
            <h2 class="demo-title">üìä Int√©grations Techniques R√©alis√©es</h2>
            <div class="demo-description">
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-semibold text-gray-900 mb-3">üîß Service API Enhanced</h3>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>‚úÖ Cache intelligent avec TTL</li>
                            <li>‚úÖ Appels API parall√®les optimis√©s</li>
                            <li>‚úÖ Gestion d'erreurs avanc√©e</li>
                            <li>‚úÖ M√©triques de performance</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-900 mb-3">üé® Composant React Avanc√©</h3>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>‚úÖ TypeScript full strict mode</li>
                            <li>‚úÖ Props configurables</li>
                            <li>‚úÖ Hooks personnalis√©s</li>
                            <li>‚úÖ Responsive design</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-900 mb-3">üöÄ SEO & Performance</h3>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>‚úÖ Variables SEO dynamiques</li>
                            <li>‚úÖ URLs optimis√©es</li>
                            <li>‚úÖ Images WebP + fallback</li>
                            <li>‚úÖ Meta tags enrichies</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-900 mb-3">üîç UX Am√©lior√©e</h3>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>‚úÖ Recherche type mine instantan√©e</li>
                            <li>‚úÖ Cascade intelligente</li>
                            <li>‚úÖ √âtats de loading</li>
                            <li>‚úÖ Messages d'erreur contextuels</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <footer class="text-center mt-12 text-gray-500 text-sm">
            <p>üéØ Migration r√©ussie des fonctionnalit√©s PHP vers l'architecture TypeScript/React moderne</p>
            <p class="mt-2">
                <strong>Fichiers cr√©√©s :</strong> 
                enhanced-brand.api.ts, advanced-vehicle-selector.tsx, advanced-vehicle-selector.css
            </p>
        </footer>
    </div>

    <script>
        // Simulation de l'interactivit√© du composant
        const modeToggle = document.getElementById('modeToggle');
        const cascadeMode = document.getElementById('cascadeMode');
        const typeMineMode = document.getElementById('typeMineMode');
        const brandSelect = document.getElementById('brandSelect');
        const yearStep = document.getElementById('yearStep');
        const modelStep = document.getElementById('modelStep');
        const typeStep = document.getElementById('typeStep');
        const typeMineInput = document.getElementById('typeMineInput');
        const typeMineResults = document.getElementById('typeMineResults');

        let isTypeMineMode = false;

        // Toggle entre mode cascade et type mine
        modeToggle.addEventListener('click', () => {
            isTypeMineMode = !isTypeMineMode;
            
            if (isTypeMineMode) {
                cascadeMode.style.display = 'none';
                typeMineMode.style.display = 'block';
                modeToggle.classList.add('active');
                modeToggle.textContent = 'üöó Cascade';
            } else {
                cascadeMode.style.display = 'block';
                typeMineMode.style.display = 'none';
                modeToggle.classList.remove('active');
                modeToggle.textContent = 'üìÑ Type Mine';
            }
        });

        // Simulation de la cascade
        brandSelect.addEventListener('change', () => {
            if (brandSelect.value) {
                yearStep.style.display = 'block';
                modelStep.style.display = 'none';
                typeStep.style.display = 'none';
            } else {
                yearStep.style.display = 'none';
                modelStep.style.display = 'none';
                typeStep.style.display = 'none';
            }
        });

        document.getElementById('yearSelect').addEventListener('change', (e) => {
            if (e.target.value) {
                modelStep.style.display = 'block';
                typeStep.style.display = 'none';
            } else {
                modelStep.style.display = 'none';
                typeStep.style.display = 'none';
            }
        });

        document.getElementById('modelSelect').addEventListener('change', (e) => {
            if (e.target.value) {
                typeStep.style.display = 'block';
            } else {
                typeStep.style.display = 'none';
            }
        });

        // Simulation de la recherche type mine
        typeMineInput.addEventListener('input', (e) => {
            const query = e.target.value;
            if (query.length >= 3) {
                typeMineResults.style.display = 'block';
            } else {
                typeMineResults.style.display = 'none';
            }
        });

        // S√©lection des types
        document.querySelectorAll('.type-card').forEach(card => {
            card.addEventListener('click', () => {
                document.querySelectorAll('.type-card').forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
                
                const typeId = card.getAttribute('data-type');
                alert(`‚úÖ V√©hicule s√©lectionn√© ! Type ID: ${typeId}\n\nRedirection vers la page v√©hicule...`);
            });
        });

        // S√©lection r√©sultat type mine
        typeMineResults.addEventListener('click', () => {
            alert('‚úÖ V√©hicule trouv√© par type mine !\n\nRedirection vers la page v√©hicule...');
        });
    </script>
</body>
</html>