# Makefile SEO - Automatisation des Analyses
# Usage: make seo-[command]

.PHONY: seo-full seo-quick seo-performance seo-monitoring seo-metadata seo-clean seo-help

# Variables
SCRIPTS_DIR = ./scripts
REPORTS_DIR = ./reports

# Cr√©er les dossiers n√©cessaires
setup:
	@mkdir -p $(REPORTS_DIR)
	@chmod +x $(SCRIPTS_DIR)/*.sh
	@echo "‚úÖ Configuration termin√©e"

# Analyse compl√®te
seo-full: setup
	@echo "üîç Lancement de l'analyse SEO compl√®te..."
	@$(SCRIPTS_DIR)/seo-analysis.sh --full

# Analyse rapide (m√©tadonn√©es + sitemap)
seo-quick: setup
	@echo "‚ö° Analyse rapide..."
	@$(SCRIPTS_DIR)/seo-analysis.sh

# Tests de performance
seo-performance: setup
	@echo "üöÄ Tests de performance..."
	@$(SCRIPTS_DIR)/seo-performance.sh

# Monitoring en temps r√©el
seo-monitoring: setup
	@echo "üì° Mode monitoring activ√©..."
	@$(SCRIPTS_DIR)/seo-monitoring.sh

# Analyse des m√©tadonn√©es
seo-metadata: setup
	@echo "üìä Analyse des m√©tadonn√©es..."
	@$(SCRIPTS_DIR)/seo-metadata-analyzer.sh

# Analyse d'URLs sp√©cifiques
seo-url: setup
	@echo "üîç Analyse d'URL sp√©cifique..."
	@read -p "URL √† analyser: " url; \
	$(SCRIPTS_DIR)/seo-metadata-analyzer.sh "$$url"

# Test de connectivit√© rapide
seo-test:
	@echo "üîå Test de connectivit√©..."
	@curl -s --max-time 5 http://localhost:3000/api/seo/config > /dev/null && \
	echo "‚úÖ Serveur SEO op√©rationnel" || \
	echo "‚ùå Serveur SEO indisponible"

# Nettoyage des rapports
seo-clean:
	@echo "üßπ Nettoyage des rapports..."
	@rm -rf $(REPORTS_DIR)/*
	@echo "‚úÖ Rapports supprim√©s"

# Affichage des derniers rapports
seo-reports:
	@echo "üìã Derniers rapports g√©n√©r√©s:"
	@ls -la $(REPORTS_DIR)/ 2>/dev/null || echo "Aucun rapport disponible"

# Aide
seo-help:
	@echo "üîç COMMANDES SEO DISPONIBLES"
	@echo "=========================="
	@echo "make seo-full        - Analyse compl√®te avec rapport d√©taill√©"
	@echo "make seo-quick       - Analyse rapide (m√©tadonn√©es + sitemap)"
	@echo "make seo-performance - Tests de performance des APIs"
	@echo "make seo-monitoring  - Surveillance en temps r√©el"
	@echo "make seo-metadata    - Analyse d√©taill√©e des m√©tadonn√©es"
	@echo "make seo-url         - Analyse d'une URL sp√©cifique"
	@echo "make seo-test        - Test de connectivit√© rapide"
	@echo "make seo-reports     - Afficher les derniers rapports"
	@echo "make seo-clean       - Nettoyer les rapports"
	@echo ""
	@echo "üìä EXEMPLES D'USAGE:"
	@echo "make seo-quick       # Pour un test rapide"
	@echo "make seo-monitoring  # Pour surveiller en continu"
