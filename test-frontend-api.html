<!DOCTYPE html>
<html>
<head>
    <title>Test API Frontend</title>
</head>
<body>
    <h1>Test API VehicleSelector</h1>
    <button onclick="testCitroenYears()">Tester CITROÃ‹N AnnÃ©es</button>
    <div id="results"></div>

    <script>
        async function testCitroenYears() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<p>ğŸ”„ Test en cours...</p>';
            
            try {
                const url = 'http://localhost:3000/api/vehicles/brands/46/years';
                console.log('ğŸ“… API Call:', url);
                
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                });

                console.log('Response status:', response.status);
                console.log('Response OK:', response.ok);
                
                if (!response.ok) {
                    resultsDiv.innerHTML = `<p>âŒ Erreur: ${response.status}</p>`;
                    return;
                }

                const data = await response.json();
                console.log('ğŸ“… Raw response:', data);
                
                // Extraction des annÃ©es comme dans enhanced-vehicle.api.ts
                if (data.data && Array.isArray(data.data)) {
                    const years = data.data.map(item => item.year);
                    console.log('ğŸ“… Extracted years:', years);
                    
                    resultsDiv.innerHTML = `
                        <h3>âœ… SuccÃ¨s!</h3>
                        <p><strong>Nombre d'annÃ©es:</strong> ${years.length}</p>
                        <p><strong>PremiÃ¨res annÃ©es:</strong> ${years.slice(0, 10).join(', ')}</p>
                        <p><strong>DerniÃ¨res annÃ©es:</strong> ${years.slice(-10).join(', ')}</p>
                    `;
                } else {
                    resultsDiv.innerHTML = `<p>âŒ Format inattendu: ${JSON.stringify(data)}</p>`;
                }
            } catch (error) {
                console.error('Erreur:', error);
                resultsDiv.innerHTML = `<p>âŒ Erreur: ${error.message}</p>`;
            }
        }
    </script>
</body>
</html>