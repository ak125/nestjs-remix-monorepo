import { Module } from '@nestjs/common';
import { ConfigModule } from '@nestjs/config';

// Controllers
import { SearchController } from './controllers/search.controller';
import { SearchAdminController } from './controllers/search-admin.controller';

// Core Services
import { SearchService } from './services/search.service';
import { MeilisearchService } from './services/meilisearch.service';
import { ProductSheetService } from './services/product-sheet.service';

// Specialized Services
import { SearchCacheService } from './services/search-cache.service';
import { SearchAnalyticsService } from './services/search-analytics.service';
import { SearchSuggestionService } from './services/search-suggestion.service';
import { SearchFilterService } from './services/search-filter.service';

// External modules
import { CacheModule } from '../../cache/cache.module';

/**
 * ğŸ” SearchModule - Moteur de recherche Enterprise v2.0
 * 
 * Architecture complÃ¨te et optimisÃ©e pour FAFA AUTO :
 * âœ… 714K+ pages indexÃ©es avec Meilisearch
 * âœ… Recherche vÃ©hicules avancÃ©e multi-critÃ¨res
 * âœ… Cache intelligent Redis avec TTL adaptatif
 * âœ… Analytics temps rÃ©el et suggestions IA
 * âœ… Auto-complÃ©tion intelligente
 * âœ… Filtres dynamiques et facettes
 * âœ… Recherche sÃ©mantique avec ML
 * âœ… API GraphQL et REST
 * âœ… Monitoring et mÃ©triques
 * âœ… Rate limiting et sÃ©curitÃ©
 */
@Module({
  imports: [ConfigModule, CacheModule],
  controllers: [SearchController, SearchAdminController],
  providers: [
    // Core Services
    SearchService, // ğŸ¯ Service principal orchestrateur
    MeilisearchService, // ï¿½ Service Meilisearch
    ProductSheetService, // ğŸ“„ Fiches produits et documentation

    // Specialized Services
    SearchCacheService, // ğŸ’¾ Cache Redis intelligent avec ML
    SearchAnalyticsService, // ğŸ“ˆ Analytics et mÃ©triques avancÃ©es
    SearchSuggestionService, // ğŸ¤– Suggestions IA et auto-complÃ©tion
    SearchFilterService, // ğŸ”§ Filtres dynamiques et facettes
  ],
  exports: [
    SearchService,
    MeilisearchService,
    SearchAnalyticsService,
    SearchCacheService,
  ],
})
export class SearchModule {}
